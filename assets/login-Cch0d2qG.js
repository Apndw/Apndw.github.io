import{d as D,A as M,p as O,f as l,i as n,g as C,j as q,l as f,q as m,E as g,r as j,v as H,w as p,x as v,n as Z}from"./index-q5C9yns_.js";import{c as P,a as h,T as A,b as L,S as B,f as o,C as N}from"./text.input-B6lIri_G.js";import{a as G}from"./navbar-BFZbUuf2.js";var K=f('<span class="xl:text-xl font-semibold">Halo, ðŸ‘‹ Selamat Datang Kembali!'),z=f("<span>Masuk"),J=f('<span class="loading loading-dots loading-lg">'),Q=f('<div class="w-full flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path fill-rule=evenodd d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z"clip-rule=evenodd></path></svg></label><div class="flex items-center justify-between"><div class=form-control></div><button type=button class="link link-primary font-semibold text-xs no-underline">Forgot Password?</button></div><button type=submit class="btn btn-block btn-primary"></button><div class="divider text-sm">OR</div><div class="w-full flex justify-center items-center gap-4"><button type=button class="btn btn-block dark:btn-neutral">Daftar</button></div><div class="w-full flex justify-center items-center gap-4 mt-2"><button type=button class="btn btn-block dark:btn-neutral">Home');function ee(){const u=D(),{updateData:d}=M.useAuth(),[a,w]=O(!1),e=P({safe_form:h(!1),username_or_email:h("",{required:!0,validators:[o.required,o.minLength,o.maxLength]}),password:h("",{required:!0,validators:[o.required,o.minLength,o.maxLength]})}),F=()=>{if(e.isSubmitted){m("System","Formulir sudah dikirimkan",g.ERROR);return}if(!e.isValid){m("System","Silahkan isi semua formulir",g.ERROR);return}if(N.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),w(!0),T()},T=async()=>{await j.post({url:"public/login",name:"System",data:{username_or_email:e.value.username_or_email,password:e.value.password},server:H.AUTH,success:s=>{const t=s.data;d(p.STATUS,!0),d(p.ROLE,t.data?.role),d(p.USER,{email:t.data?.email,username:t.data?.username}),d(p.MISC,{logo:t.data?.logo,status:t.data?.verified==v.VERIFIED.valueOf()?v.VERIFIED:v.UNVERIFIED}),m("System",t.message,g.SUCCESS),u("/dashboard",{replace:!0})},error:()=>{m("System","Something went wrong when checking data from database",g.ERROR)},finally:()=>{e.markSubmitted(!1),w(!1)}})};return l(B,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return l(G,{get disabled(){return a()},title:"Masuk",get children(){return[K(),(()=>{var s=Q(),t=s.firstChild;t.firstChild;var c=t.nextSibling;c.firstChild;var b=c.nextSibling,V=b.firstChild,S=V.nextSibling,i=b.nextSibling,I=i.nextSibling,x=I.nextSibling,_=x.firstChild,U=x.nextSibling,y=U.firstChild;return n(t,l(A,{type:"text",name:"username_or_email",get disabled(){return a()},placeholder:"Email atau Username",get control(){return e.controls.username_or_email},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(s,l(L,{name:"Email atau Username",get control(){return e.controls.username_or_email}}),c),n(c,l(A,{type:"password",name:"password",get disabled(){return a()},placeholder:"Password",get control(){return e.controls.password},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(s,l(L,{name:"Password",get control(){return e.controls.password}}),b),S.$$click=()=>u("/forgot-password"),i.$$click=F,n(i,l(C,{get when(){return!a()},get children(){return z()}}),null),n(i,l(C,{get when(){return a()},get children(){return J()}}),null),_.$$click=()=>u("/register"),y.$$click=()=>u("/"),q(r=>{var E=a(),k=a(),$=a(),R=a();return E!==r.e&&(S.disabled=r.e=E),k!==r.t&&(i.disabled=r.t=k),$!==r.a&&(_.disabled=r.a=$),R!==r.o&&(y.disabled=r.o=R),r},{e:void 0,t:void 0,a:void 0,o:void 0}),s})()]}})}})}Z(["click"]);export{ee as default};
