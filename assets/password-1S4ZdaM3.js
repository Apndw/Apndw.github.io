import{d as j,p as f,o as I,f as a,i,g as w,j as K,l as m,q as c,E as u,r as O,v as P,n as U}from"./index-CVlLkqcs.js";import{a as Z}from"./navbar-DrdRYc6q.js";import{c as z,a as g,T as y,b as _,S as B,f as s,C as D}from"./text.input-AwozbXYB.js";var G=m('<span class="xl:text-xl font-semibold">Silahkan masukkan alamat email anda,<br>tautan akan dikirimkan ke email anda'),H=m("<span>Kirim"),J=m('<span class="loading loading-dots loading-lg">'),Q=m('<div class="w-full flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><label class="input input-bordered min-w-full flex items-center gap-2"><div class="card p-1"><div class="flex items-center justify-center"><span class="text-xl font-semibold"></span></div></div><div class="divider sm:divider-horizontal"></div></label><div class="flex items-center justify-between"></div><button type=submit class="btn btn-block btn-primary"></button><div class="divider text-sm"></div><div class="w-full flex justify-center items-center gap-4"><button type=button class="btn btn-block dark:btn-neutral">Masuk');function ee(){const h=j(),[$,E]=f(0),[r,b]=f(!1),[R,A]=f(""),e=z({safe_form:g(!1),email:g("",{required:!0,validators:[s.required,s.email,s.maxLength]}),captchaCode:g("",{required:!0,validators:[s.required,s.minLengthNumber,s.maxLengthNumber,s.isNumber]})});I(()=>{p()});const L=()=>Math.floor(Math.random()*8)+1,p=()=>{let t="";const l=Math.floor(Math.random()*2)+4;for(let n=0;n<l;n++)t+=L()+" ";A(t),E(Number(t.trim().replace(/\s/g,"")))},T=()=>{if(e.isSubmitted){c("System","Formulir sudah dikirimkan",u.ERROR);return}if(!e.isValid){c("System","Silahkan isi semua formulir",u.ERROR),p();return}if(D.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}if(Number(e.value.captchaCode)!=$()){e.controls.captchaCode.setErrors({isInvalid:"Tidak sesuai"}),p();return}e.markSubmitted(!0),b(!0),M()},M=async()=>{await O.post({url:"public/forgot-password",name:"System",data:{email:e.value.email},server:P.AUTH,success:t=>{const l=t.data;c("System",l.message,u.SUCCESS),h("/forgot-process",{replace:!0,state:{email:e.value.email}})},error:()=>{c("System","Something went wrong when sending email",u.ERROR)},finally:()=>{e.markSubmitted(!1),b(!1)}})};return a(B,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return a(Z,{get disabled(){return r()},title:"Lupa Password",get children(){return[G(),(()=>{var t=Q(),l=t.firstChild;l.firstChild;var n=l.nextSibling,v=n.firstChild,F=v.firstChild,N=F.firstChild;v.nextSibling;var x=n.nextSibling,o=x.nextSibling,V=o.nextSibling,q=V.nextSibling,S=q.firstChild;return i(l,a(y,{type:"email",name:"email",get disabled(){return r()},placeholder:"Email",get control(){return e.controls.email},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),i(t,a(_,{name:"Email",get control(){return e.controls.email}}),n),i(N,R),i(n,a(y,{type:"number",name:"captcha",get disabled(){return r()},placeholder:"Kode Captcha",get control(){return e.controls.captchaCode},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),i(t,a(_,{name:"Kode Captcha",get control(){return e.controls.captchaCode}}),x),o.$$click=T,i(o,a(w,{get when(){return!r()},get children(){return H()}}),null),i(o,a(w,{get when(){return r()},get children(){return J()}}),null),S.$$click=()=>h("/login"),K(d=>{var C=r(),k=r();return C!==d.e&&(o.disabled=d.e=C),k!==d.t&&(S.disabled=d.t=k),d},{e:void 0,t:void 0}),t})()]}})}})}U(["click"]);export{ee as default};
