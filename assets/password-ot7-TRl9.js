import{d as F,p as g,o as I,f as n,i,g as C,j as K,l as m,q as c,E as u,r as O,v as P,n as U}from"./index-BIUwYvvO.js";import{a as Z}from"./navbar-Co9d5Ez5.js";import{c as z,a as k,T as y,b as $,f as s}from"./text.input-BEKveikR.js";var B=m('<span class="xl:text-xl font-semibold">Silahkan masukkan alamat email anda,<br>tautan akan dikirimkan ke email anda'),D=m("<span>Kirim"),G=m('<span class="loading loading-dots loading-lg">'),H=m('<div class="w-full flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><label class="input input-bordered min-w-full flex items-center gap-2"><div class="card p-1"><div class="flex items-center justify-center"><span class="text-xl font-semibold"></span></div></div><div class="divider sm:divider-horizontal"></div></label><div class="flex items-center justify-between"></div><button type=submit class="btn btn-block btn-primary"></button><div class="divider text-sm"></div><div class="w-full flex justify-center items-center gap-4"><button type=button class="btn btn-block dark:btn-neutral">Masuk');function X(){const h=F(),[E,_]=g(0),[a,b]=g(!1),[R,A]=g(""),e=z({email:k("",{required:!0,validators:[s.required,s.email,s.maxLength]}),captchaCode:k("",{required:!0,validators:[s.required,s.minLengthNumber,s.maxLengthNumber,s.isNumber]})});I(()=>{p()});const L=()=>Math.floor(Math.random()*8)+1,p=()=>{let t="";const r=Math.floor(Math.random()*2)+4;for(let l=0;l<r;l++)t+=L()+" ";A(t),_(Number(t.trim().replace(/\s/g,"")))},M=()=>{if(e.isSubmitted){c("System","Formulir sudah dikirimkan",u.ERROR);return}if(!e.isValid){c("System","Silahkan isi semua formulir",u.ERROR),p();return}if(Number(e.value.captchaCode)!=E()){e.controls.captchaCode.setErrors({isInvalid:"Tidak sesuai"}),p();return}e.markSubmitted(!0),b(!0),T()},T=async()=>{await O.post({url:"public/forgot-password",name:"System",data:{email:e.value.email},server:P.AUTH,success:t=>{const r=t.data;c("System",r.message,u.SUCCESS),h("/forgot-process",{replace:!0,state:{email:e.value.email}})},error:()=>{c("System","Something went wrong when sending email",u.ERROR)},finally:()=>{e.markSubmitted(!1),b(!1)}})};return n(Z,{get disabled(){return a()},title:"Lupa Password",get children(){return[B(),(()=>{var t=H(),r=t.firstChild;r.firstChild;var l=r.nextSibling,f=l.firstChild,N=f.firstChild,V=N.firstChild;f.nextSibling;var v=l.nextSibling,o=v.nextSibling,q=o.nextSibling,j=q.nextSibling,x=j.firstChild;return i(r,n(y,{type:"email",name:"email",get disabled(){return a()},placeholder:"Email",get control(){return e.controls.email},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),i(t,n($,{name:"Email",get control(){return e.controls.email}}),l),i(V,R),i(l,n(y,{type:"number",name:"captcha",get disabled(){return a()},placeholder:"Kode Captcha",get control(){return e.controls.captchaCode},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),i(t,n($,{name:"Kode Captcha",get control(){return e.controls.captchaCode}}),v),o.$$click=M,i(o,n(C,{get when(){return!a()},get children(){return D()}}),null),i(o,n(C,{get when(){return a()},get children(){return G()}}),null),x.$$click=()=>h("/login"),K(d=>{var S=a(),w=a();return S!==d.e&&(o.disabled=d.e=S),w!==d.t&&(x.disabled=d.t=w),d},{e:void 0,t:void 0}),t})()]}})}U(["click"]);export{X as default};
